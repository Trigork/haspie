\chapter{Introducción}
\label{chap:introduccion}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Objetivo: Exponer de qué va este proyecto, sus líneas maestras, objetivos,   %
%           etc.                                                               %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Motivación}
 \label{sec:motivation}
  \lettrine{E}l aprendizaje de la teoría musical lleva estancado en los mismos métodos y sistemas desde hace años. Son métodos funcionales basados en ejercicios y repetición, para acostumbrar el oído y lograr soltura a la hora de componer o resolver los problemas propuestos en clase. El aprendizaje de armonía es uno de los pasos más importantes en música, ya que saber analizar de este modo una partitura es crucial para comprenderla, modificarla o componer nuevas piezas. El presente proyecto busca ayudar tanto en el aprendizaje como en la composición desde un punto de vista puramente armónico. 
 
 La Inteligencia Artificial estudia como crear sistemas que se comporten de manera inteligente, es decir, que sean capaces de razonar, deducir y resolver problemas del mismo modo que pudiera hacerlo una persona. Se busca que estos sistemas sean autónomos, se busca que estos sistemas sepan justificar sus resultados, se busca que estos sistemas sean capaces de aprender para poder desempeñar su tarea con mejores resultados o en menos tiempo. Pero la inteligencia conlleva más cosas, tales como la creatividad. La creatividad es el impulso por el cual alguien (o algo) decide crear una obra de la nada. No solo una obra artística, también obras funcionales como lo fueron los grandes inventos del pasado. 
 
 Existe, no obstante, controversia con respecto al campo, como suele suceder siempre que un ordenador empieza a conseguir hacer lo que antes solo podían hacer las personas. En el caso del sistema Emily Howell, por ejemplo, ha habido numerosos directores de orquestas que se han negado a interpretar sus composiciones al no provenir de un compositor humano. Existe, a ojos de los más conservadores respecto al tema, el miedo a que el esfuerzo de la composición musical pierda su significado. Si no podemos distinguir además qué piezas han sido compuestas por máquinas y cuales no, el problema se acentúa. 
 
 En este caso, la motivación del trabajo es una mezcla entre creatividad y la necesidad de solucionar un problema. Se habla de creatividad porque el proyecto está aplicado a un campo inherentemente creativo, como es la música. Pero al mismo tiempo, pretende ser una herramienta que ayude a estudiantes de música a progresar en su trabajo. Este sistema inteligente, será capaz de razonar, deducir, y último lugar crear, la armonía de piezas musicales sencillas. Si bien esto no es un trabajo completo de composición, sí que debería ayudar a corregir partituras allí donde el sistema detecte incoherencias con la armonía creada o ya presente en la pieza. 
 
 El interés por la aplicación del \textit{Answer Set Programming} en la música derivó de un trabajo previo con el Profesor Cabalar durante el curso de la asignatura de Representación del Conocimiento y Razonamiento Automático donde los alumnos construimos un sistema que dada una melodía, producía un canon polifónico. El presente trabajo se planteó como una extensión generalista del problema, orientado a composición completa, aunque fue reducido para poder entrar en los límites de un trabajo de fin de grado debido a la gran complejidad de crear un sistema así. No obstante, la lógica proposicional es idónea para esta tarea ya que el conjunto de reglas de la armonía clásica usada en los niveles más elementales del Conservatorio no ha cambiado desde los orígenes de la materia. Es un conjunto de reglas conciso, no muy grande y más o menos estricto. Simplemente traduciendo este conjunto de reglas a restricciones del lenguaje de lógica proposicional y siendo capaces de extraer los hechos lógicos de una partitura, el sistema debería ser capaz de detectar los errores de la misma y solucionarlos, así como rellenar huecos dejados a propósito en la partitura o completar otras líneas melódicas para formar, por fin, la armonía de la canción.
 
 \section{El proyecto}
  \label{sec:the_project}
 El proyecto consiste en la construcción de una herramienta software capaz de tomar como entrada una partitura polifónica (es decir, de múltiples voces) parcial, deducir los acordes correspondientes a la unidad de tiempo deseada, y si se desea completarla respetando las reglas básicas de armonía, de modo similar a los ejercicios habituales en esta disciplina musical. Se intentará abarcar la estructura musical de forma horizontal (compases) y vertical (múltiples voces). Este problema de partida se puede especificar en términos de resolución de restricciones, un campo para el que existen distintos formalismos y herramientas disponibles. En concreto, el proyecto usará el paradigma de \textit{Answer Set Programming} una variante de Programación Lógica de uso frecuente para la Representación del Conocimiento y la resolución de problemas. La principal ventaja de ASP para este caso es la facilidad que otorga el uso de predicados simples a la hora de definir ciertos sucesos dentro de la partitura así como añadir directamente las reglas usadas en armonía bajo la forma de reglas de programación lógica. Esto proporciona una enorme flexibilidad, ya que ASP es un paradigma totalmente declarativo, en el que sólo se realiza la especificación del problema, y no se describe el método de resolución que se aplica para el mismo. Otra ventaja importante de ASP para este escenario es la posibilidad de usar preferencias, ya que algunas reglas armónicas no son estrictas, sino que se busca que se respeten en la medida de lo posible. Existen además antecedentes de uso de ASP para composición musical. En concreto, el sistema ANTON permite también la composición polifónica (mayormente, dos voces) siguiendo el estilo musical de reglas "Palestrina" de la música renacentista. Esta herramienta es más elaborada que la presente propuesta, ya que realiza la composición completa de una pieza, incluyendo figuras rítmicas complejas. La principal diferencia es que el presente anteproyecto está orientado principalmente a armonización y, aunque será capaz de completar partituras, no busca obtener un buen resultado a nivel melódico.
 
 El principal objetivo del proyecto es crear un conjunto de módulos que, funcionando como uno solo, sean capaces de ofrecer resultados a ejercicios sencillos de armonización aceptables desde el punto de vista de un experto, de modo que el software final pueda ser utilizado en el mundo real para ayudar a la composición y al aprendizaje de armonía.
 
 Los módulos planteados, de forma general, para el proyecto son:
 \begin{itemize}
 	\item \textbf{Entrada y preprocesado:} Haciendo uso de un editor musical capaz de exportar al formato de entrada se producirá un fichero que este modulo convertirá a hechos lógicos.
 	\item \textbf{Armonización:} Escrito en ASP, mediante el uso de software que calcule las restricciones para el fichero de entrada, este modulo producirá soluciones al problema de armonización y completará la partitura en caso de ser necesario.
 	\item \textbf{Salida y postprocesado:} Tomando como entrada las soluciones en forma de hechos lógicos, producirá un fichero en el formato de salida especificado para su posterior visualización.
 \end{itemize}
 
 La principal restricción impuesta al proyecto es la imposibilidad de detectar y trabajar correctamente con cambios de tonalidad a lo largo de la partitura. Los motivos para marcar esta restricción son que es tremendamente difícil detectar cuando una pieza comienza a realizar estos cambios y que no se puede realizar una armonización completa correcta bajo una única clave. Otra restricción es que a nivel melódico y rítmico no se busca un resultado concreto y se dejará a discreción del usuario aplicar los cambios necesarios para lograr estos resultados. Esto se debe a que en la generación de nuevas voces no se contará con información rítmica, sólo armónica y melódica, y calcular todos los posibles patrones rítmicos es demasiado complejo. En cuanto a la melodía, a diferencia de la armonía que puede ser establecida con una serie de restricciones más o menos sencillas, requiere un conocimiento más profundo de la partitura a nivel semántico, escoger una u otra nota depende fuertemente de un significado que el compositor busca en cada momento y esto no es alcanzable desde el punto de vista desde el cual se plantea el proyecto. Con ciertos cambios de planteamiento, no sería imposible superar estas restricciones impuestas al proyecto, pero entonces excedería el tamaño normal de un trabajo de fin de grado.
 
 
 \section{Estructura}
  \label{sec:project_structure}
 El resto de capítulos de la memoria del presente proyecto seguirán una estructura tradicional. 
 \begin{itemize}
 	\item \textbf{En el Capítulo 2} se enmarca el proyecto en el contexto tecnológico actual y se explicarán algunos términos que puedan no resultar familiares al estudiante medio del Grado en Ingeniería Informática. Se exponen además las nociones básicas musicales necesarias para una mejor comprensión del proyecto.
 	\item \textbf{En el Capítulo 3} se trata el grueso del proyecto, es decir, la planificación y desarrollo del mismo, empezando por la definición del tipo de ciclo empleado así como una estimación en horas y presupuesto para el proyecto en general. A continuación se detalla el trabajo realizado en cada una de las iteraciones, comparando con la planificación inicial y comentando los objetivos logrados al final de cada una de ellas.
  	\item \textbf{En el Capítulo 4} se realiza una evaluación objetiva del proyecto, tanto cualitativa como cuantitativa. Varios expertos proponen diferentes piezas musicales y juzgan los resultados ofrecidos por la herramienta.
 	\item \textbf{En el Capítulo 5} se detallan las conclusiones extraídas del proyecto, su viabilidad, impresiones y se realiza una evaluación general subjetiva del mismo.
 \end{itemize}
 Por último, tras este capítulo final se incluye una referencia detallada de la Bibliografía empleada durante el desarrollo y diversos Anexos con diagramas que complementan a los incluidos en los capítulos de desarrollo y evaluación.
 
