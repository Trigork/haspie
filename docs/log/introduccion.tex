\chapter{Introducción}
\minitoc
\label{chap:introduccion}

\section{Sobre el proyecto}

El proyecto consiste en la construcción de una herramienta software capaz de tomar como entrada una partitura polifónica (es decir, de múltiples voces) parcial y completarla respetando las reglas básicas de armonía, de modo similar a los ejercicios habituales en esta disciplina musical. Se intentará abarcar la estructura musical de forma horizontal (compases) y vertical (múltiples voces) pero, a priori, se obviarán tanto posibles variaciones del ritmo como la incorporación de distintos estilos musicales. Este problema de partida se puede especificar en términos de resolución de restricciones, un campo para el que existen distintos formalismos y herramientas disponibles. En concreto, el proyecto usará el paradigma de \textit{Answer Set Programming} una variante de Programación Lógica de uso frecuente para la Representación del Conocimiento y la resolución de problemas. La principal ventaja de ASP para este caso es la facilidad que otorga el uso de predicados simples a la hora de definir ciertos sucesos dentro de la partitura así como añadir directamente las reglas usadas en armonía bajo la forma de reglas de programación lógica. Esto proporciona una enorme flexibilidad, ya que ASP es un paradigma totalmente declarativo, en el que sólo se realiza la especificación del problema, y no se describe el método de resolución que se aplica para el mismo. Otra ventaja importante de ASP para este escenario es la posibilidad de usar preferencias, ya que algunas reglas armónicas no son estrictas, sino que se busca que se respeten en la medida de lo posible. Existen además antecedentes de uso de ASP para composición musical. En concreto, el sistema ANTON permite también la composición polifónica (mayormente, dos voces) siguiendo el estilo musical de reglas "Palestrina" de la música renacentista. Esta herramienta es más elaborada que la presente propuesta, ya que realiza la composición completa de una pieza, incluyendo figuras rítmicas complejas. La principal diferencia es que el presente anteproyecto está orientado a la armonización en piezas de cuatro o más voces, como las habituales en música coral.

\subsection{Módulos}

\subsubsection{Entrada y preprocesado}
Mediante el uso de una herramienta de edición musical, se permitirá al usuario introducir la partitura a completar. Dicho editor o interfaz producirá ficheros en formato MusicXML para, más adelante, convertir las notas de este fichero a hechos en ASP que puedan ser interpretados. La conversión de MusicXML a hechos lógicos se realizará mediante el diseño e implementación de un \textit{parser} específico para el problema.

\subsubsection{Procesado}
El núcleo lógico del programa. Aquí es donde se realizará la armonización vía ASP, aplicando preferencias indicadas y produciendo una salida en el formato adecuado, correspondiendo con el de entrada. Como ya se ha mencionado, la idea es crear predicados ASP que permitan comprobar la armonía de forma horizontal a lo largo de los compases y en vertical, teniendo en cuenta qué sucede en el resto de voces para que el programa “comprenda” qué tonalidad se está desarrollando en el compás actual, hacia donde fluye la melodía, etc. Principalmente se definirán predicados que “rellenan” la partitura de forma arbitraria para luego añadir restricciones que prohíben soluciones no deseadas, evitando disonancias, saltos de quinta, acordes tritono y demás figuras incorrectas en lo que a la música clásica se refiere o resultan poco agradables al oído. También se especificarán preferencias que describen reglas no estrictas que se deberán satisfacer en la medida de lo posible, de modo que ASP proporcionará soluciones que optimicen ese conjunto de preferencias. Tras hallar la solución, se producirá un nuevo fichero MusicXML con las correcciones necesarias. 

\subsubsection{Postprocesado y Salida}
Finalmente, y de forma opcional, se contempla la posibilidad de incluir un módulo que tome el fichero MusicXML corregido y que enriquezca el resultado. Este módulo no será desarrollado en ASP sino que tomará patrones y los aplicará sobre la partitura para darle una sonoridad más limpia y cuidada (división de figuras, ligadura de notas largas iguales consecutivas, cambios de estilo, instrumentación, etc). Finalmente, la salida se producirá en el formato deseado por el usuario, siendo los más interesantes la partitura en PDF, formatos compatibles con el lenguaje de notación musical Lilypond o inclusive en formato MIDI para su reproducción sonora. 

\section{Motivación}

La Inteligencia Artificial estudia como crear sistemas que se comporten de manera inteligente, es decir, que sean capaces de razonar, deducir y resolver problemas del mismo modo que pudiera hacerlo una persona. Se busca que estos sistemas sean autónomos, se busca que estos sistemas sepan justificar sus resultados, se busca que estos sistemas sean capaces de aprender para poder desempeñar su tarea con mejores resultados o en menos tiempo. Pero la inteligencia conlleva más cosas, tales como la creatividad. La creatividad es el impulso por el cual alguien (o algo) decide crear una obra de la nada. No solo una obra artística, también obras funcionales como lo fueron los grandes inventos del pasado. 

Existe, no obstante, controversia con respecto al campo, como suele suceder siempre que un ordenador empieza a conseguir hacer lo que antes solo podían hacer las personas. En el caso del sistema Emily Howell, por ejemplo, ha habido numerosos directores de orquestas que se han negado a interpretar sus composiciones al no provenir de un compositor humano. Existe, a ojos de los más conservadores respecto al tema, el miedo a que el esfuerzo de la composición musical pierda su significado. Si no podemos distinguir además qué piezas han sido compuestas por máquinas y cuales no, el problema se acentúa. 

En este caso, la motivación del trabajo es una mezcla entre creatividad y la necesidad de solucionar un problema. Se habla de creatividad porque el proyecto está aplicado a un campo inherentemente creativo, como es la música. Pero al mismo tiempo, pretende ser una herramienta que ayude a estudiantes de música a progresar en su trabajo. Este sistema inteligente, será capaz de razonar, deducir, y último lugar crear, la armonía de piezas musicales sencillas. Si bien esto no es un trabajo completo de composición, sí que debería ayudar a corregir partituras allí donde el sistema detecte incoherencias con la armonía creada o ya presente en la pieza. 


El interés por la aplicación del \textit{Answer Set Programming} en la música derivó de un trabajo previo con el Profesor Cabalar durante el curso de la asignatura de Representación del Conocimiento y Razonamiento Automático donde los alumnos construimos un sistema que dada una melodía, producía un canon polifónico. El presente trabajo se planteó como una extensión generalista del problema, orientado a composición completa, aunque fue reducido para poder entrar en los límites de un trabajo de fin de grado debido a la gran complejidad de crear un sistema así. No obstante, la lógica proposicional es idónea para esta tarea ya que el conjunto de reglas de la armonía clásica usada en los niveles más elementales del Conservatorio no ha cambiado desde los orígenes de la materia. Es un conjunto de reglas conciso, no muy grande y más o menos estricto. Simplemente traduciendo este conjunto de reglas a restricciones del lenguaje de lógica proposicional y siendo capaces de extraer los hechos lógicos de una partitura, el sistema debería ser capaz de detectar los errores de la misma y solucionarlos, así como rellenar huecos dejados a propósito en la partitura o completar otras líneas melódicas para formar, por fin, la armonía de la canción.

Con fines académicos, el sistema podrá ayudar a estudiantes y profesores de armonía básica por igual, al poder corregir ejercicios de esta materia de modo rápido, incluso proponiendo soluciones no contempladas inicialmente. También ayudará en trabajos de composición armónica, explorando, de forma creativa, nuevas posibilidades para el autor de la pieza original. No solo es una propuesta interesante a nivel de investigación informática, sino también a nivel musical. Por último, pero no menos importante, cada vez más alumnos cursan estudios musicales de algún tipo desde edades más tempranas, ya sea por cuenta propia o a través de academias y conservatorios. El estudio del contexto ha revelado que si bien existe investigación con respecto a la computación musical, no hay muchos sistemas inteligentes finales dedicados a la composición o a la asistencia en la composición musical.
